# Inner Circle Trading (ICT) Strategy Documentation

## 1. Introduction

The Inner Circle Trading (ICT) strategy, developed by Michael J. Huddleston, focuses on understanding market structure, liquidity pools, order blocks, and fair value gaps (FVG). This strategy aims to identify high-probability trading opportunities by analyzing how institutional traders operate in the financial markets.

## 2. Key Concepts

### 2.1 Market Structure
- **Swing Highs and Lows**: Identify significant swing highs and lows to understand the overall market structure.
- **Break of Structure (BOS)**: Occurs when price breaches a key swing high/low, signaling a potential trend reversal or continuation.
- **Market Structure Shift (MSS)**: A smaller timeframe shift indicating a change in short-term market direction, often used for precise entries.
- **Market Phases**: Recognize different market phases such as accumulation, distribution, uptrend, and downtrend.

### 2.2 Liquidity Pools
- **Definition**: Areas where liquidity is likely to be concentrated, such as previous highs and lows, round numbers, and order blocks.
- **Sell-side vs. Buy-side Liquidity**:
  - **Sell-side**: Stops below recent lows.
  - **Buy-side**: Stops above recent highs.
- **Stop Hunts**: Understand how institutional traders may target liquidity pools to trigger stop-loss orders and create trading opportunities.
- **Sweep of Liquidity**: A scenario where price moves aggressively to take out liquidity before resuming its primary trend.

### 2.3 Order Blocks (OB)
- **Definition**: Areas where institutional traders have placed large orders, causing significant price movements.
- **Identification**: Look for consolidation areas before a strong price move, which indicates the presence of an order block.
- **Bullish OB**: A bearish candle before a strong upward move.
- **Bearish OB**: A bullish candle before a strong downward move.

### 2.4 Fair Value Gaps (FVG)
- **Definition**: Gaps between price levels where there is an imbalance between buyers and sellers.
- **Usage**: Use FVGs to identify potential entry and exit points, as price often returns to fill these gaps.

### 2.5 Time and Price Theory
- **Optimal Trade Entry (OTE)**: Identify the optimal entry point within a price retracement, typically between the 61.8% and 79% Fibonacci retracement levels.
- **Kill Zones**: Specific times of the day when institutional traders are most active, such as the London Open, New York Open, and London Close.
- **Sessions**:
  - **London Session**: High volatility, often sets the daily range.
  - **New York Session**: Continuation or reversal of London trends.
  - **Asia Session**: Often a consolidation phase.
- **High-Probability Times**:
  - **Killzones**: Specific times during sessions with heightened activity:
    - **London Killzone**: 2 AM – 5 AM EST.
    - **New York Killzone**: 7 AM – 10 AM EST.
    - **London Close Killzone**: 10 AM – 12 PM EST.
  - **Daily Open and Close Levels**: These are key reference points for intraday movements.

### 2.6 Institutional Order Flow
- **Bias**: Determine the overall market bias (bullish or bearish) based on institutional order flow.
- **Confirmation**: Use multiple timeframes to confirm the market bias and identify high-probability trading setups.
- **Institutional Reference Points**:
  - **Equilibrium**: The 50% level of a range or price move, often a key point for retracements or reversals.
  - **Premium/Discount Zones**:
    - **Premium Zone**: Above equilibrium, favorable for selling.
    - **Discount Zone**: Below equilibrium, favorable for buying.

## 3. ICT Trading Strategy Steps

### Step 1: Analyze Market Structure
- Identify the overall trend by analyzing swing highs and lows.
- Determine the current market phase (accumulation, distribution, uptrend, downtrend).

### Step 2: Identify Liquidity Pools
- Look for areas where liquidity is likely to be concentrated, such as previous highs and lows, round numbers, and order blocks.
- Anticipate potential stop hunts by institutional traders.

### Step 3: Locate Order Blocks
- Identify consolidation areas before a strong price move, indicating the presence of an order block.
- Use order blocks as potential entry and exit points.

### Step 4: Use Fair Value Gaps (FVG)
- Identify gaps between price levels where there is an imbalance between buyers and sellers.
- Use FVGs to identify potential entry and exit points, as price often returns to fill these gaps.

### Step 5: Apply Time and Price Theory
- Use the Optimal Trade Entry (OTE) method to identify the optimal entry point within a price retracement.
- Focus on specific times of the day (kill zones) when institutional traders are most active.

### Step 6: Confirm Institutional Order Flow
- Determine the overall market bias using multiple timeframes.
- Look for confluence between the identified order blocks, FVGs, and liquidity pools.

## 4. Example of ICT Trading Setup

### 1. Identify Market Structure
- Determine the overall trend by analyzing swing highs and lows on the daily chart.
- Identify the current market phase (e.g., uptrend).

### 2. Locate Liquidity Pools
- Identify previous swing highs and lows as potential liquidity pools.
- Look for round numbers and order blocks.

### 3. Find Order Blocks
- Identify consolidation areas before a strong price move on the 4-hour chart.
- Mark these areas as potential order blocks.

### 4. Use Fair Value Gaps (FVG)
- Identify FVGs on the 1-hour chart.
- Use these gaps to identify potential entry and exit points.

### 5. Apply Time and Price Theory
- Use the OTE method to identify the optimal entry point within a price retracement on the 15-minute chart.
- Focus on kill zones such as the London Open and New York Open.

### 6. Confirm Institutional Order Flow
- Confirm the market bias using multiple timeframes (daily, 4-hour, 1-hour).
- Look for confluence between the identified order blocks, FVGs, and liquidity pools.

## 5. Detailed Steps for ICT Trading Setup

### Step 1: Identify Market Structure
- **Determine the Overall Trend:**
  - **Daily Chart:** Begin by analyzing the daily chart to understand the primary trend.
  - **Higher Highs and Higher Lows:** An uptrend is characterized by price making higher highs and higher lows.
  - **Lower Highs and Lower Lows:** A downtrend is indicated by lower highs and lower lows.
- **Identify Market Phases:**
  - **Accumulation Phase:** Occurs when the market moves sideways after a downtrend, indicating potential buying by institutional traders.
  - **Markup Phase (Uptrend):** Price begins to rise as demand exceeds supply, look for clear higher highs and higher lows.
  - **Distribution Phase:** Market moves sideways after an uptrend, suggesting institutions may be offloading positions.
  - **Markdown Phase (Downtrend):** Price declines as supply exceeds demand, characterized by lower highs and lower lows.
- **Key Actions:**
  - **Trendlines:** Draw trendlines to visualize the trend.
  - **Swing Points:** Mark significant swing highs and lows.
  - **Break of Structure (BOS):** Identify points where the trend might be reversing.

### Step 2: Locate Liquidity Pools
- **Identify Previous Swing Highs and Lows:**
  - **Liquidity Zones:**
    - **Buy-Side Liquidity:** Above recent swing highs where stop-loss orders for short positions are placed.
    - **Sell-Side Liquidity:** Below recent swing lows where stop-loss orders for long positions are located.
  - **Expect Price Movement:** Price often moves to these liquidity zones to trigger stop-loss orders and collect liquidity before reversing.
- **Look for Round Numbers and Order Blocks:**
  - **Psychological Levels:** Round numbers (e.g., 1.2000 in EUR/USD) attract significant trading activity.
  - **Order Blocks:** Areas where institutional orders are clustered, identified by a consolidation period before a sharp price move.
- **Key Actions:**
  - **Mark Liquidity Zones:** Highlight these areas on your chart as potential targets for price.
  - **Anticipate Stop Hunts:** Be aware that price may intentionally move to these levels.

### Step 3: Find Order Blocks
- **On the 4-Hour Chart:**
  - **Identify Consolidation Areas:** Look for tight trading ranges before significant price movements.
  - **Bullish Order Block:** The last bearish candle before a strong bullish move, indicating institutional buying interest.
  - **Bearish Order Block:** The last bullish candle before a strong bearish move, signifying institutional selling pressure.
- **Mark These Areas:**
  - **Draw Rectangles:** Encompass the body of the order block candle(s).
  - **Extend Zones:** Project the order block zones into the future as these areas can act as support or resistance.
- **Key Actions:**
  - **Wait for Retracement:** Anticipate price returning to the order block for potential entries.
  - **Confirm with Volume:** Higher volume during the order block adds validity.

### Step 4: Use Fair Value Gaps (FVG)
- **Identify FVGs on the 1-Hour Chart:**
  - **Definition:** A Fair Value Gap occurs when there is a price gap between three consecutive candles, representing an imbalance where not all orders were filled.
  - **Spotting FVGs:** In an uptrend, if **Candle 2's** low is above **Candle 1's** high, the gap between **Candle 1's** high and **Candle 2's** low is an FVG. In a downtrend, if **Candle 2's** high is below **Candle 1's** low.
- **Use These Gaps:**
  - **Entry Points:** Price often retraces to fill the FVG before resuming the trend. Consider waiting for price to enter the FVG for a better entry.
  - **Exit Points:** FVGs can also act as target areas for taking profit.
- **Key Actions:**
  - **Mark FVG Zones:** Draw rectangles over the gaps.
  - **Monitor Price Action:** Look for reversal patterns within the FVG.

### Step 5: Apply Time and Price Theory
- **Optimal Trade Entry (OTE):**
  - **Use Fibonacci Retracement:** Draw from swing low to swing high (uptrend) or swing high to swing low (downtrend).
  - **OTE Zone:** Focus on the 61.8% to 79% retracement levels, considered optimal for entering trades in the direction of the trend.
- **Focus on Kill Zones:**
  - **High Liquidity Periods:**
    - **London Kill Zone:** 2 AM – 5 AM EST.
    - **New York Kill Zone:** 7 AM – 10 AM EST.
  - **Why Kill Zones Matter:** Institutional traders are most active, and increased volatility provides better trading opportunities.
- **Key Actions:**
  - **Align Entry Timing:** Plan trades to coincide with these periods.
  - **Combine with Other Signals:** Ensure other ICT elements align during the kill zone.

### Step 6: Confirm Institutional Order Flow
- **Multiple Timeframe Analysis:**
  - **Daily Chart:** Establish overall market bias.
  - **4-Hour Chart:** Refine trend direction and key levels.
  - **1-Hour Chart:** Identify entry zones like FVGs and order blocks.
- **Look for Confluence:**
  - **Alignment of Signals:** Ensure that market structure, liquidity pools, order blocks, and FVGs all support the trade idea.
  - **Institutional Bias:** Trades should be in the direction of perceived institutional order flow.
- **Final Confirmation:**
  - **Price Action Signals:** Look for candlestick patterns indicating reversal or continuation.
  - **Volume Analysis:** Increased volume at key levels adds strength to the setup.
- **Key Actions:**
  - **Double-Check Analysis:** Verify that all elements support the trade.
  - **Risk Assessment:** Ensure the risk-to-reward ratio meets your criteria.

## 6. High-Probability Trade Conditions

High-probability trade setups in ICT occur when multiple ICT concepts align, creating a strong confluence of factors. These setups are based on observing price behavior that reflects institutional order flow and liquidity hunts.

### 6.1 Key Conditions for High-Probability Positions

1. **Liquidity Sweep Followed by a Break of Structure (BOS):**
   - **Setup**: Price sweeps liquidity (above a recent high or below a recent low) and then reverses direction with a BOS.
   - **High Probability**: This setup signals that smart money has grabbed liquidity and is likely driving price in the opposite direction.

2. **Order Block (OB) Retests:**
   - **Setup**: Price retraces to an identified order block after a strong move away.
   - **High Probability**: Order blocks are areas where institutional orders have been placed, so a retest often triggers significant reactions.

3. **Fair Value Gap (FVG) Fills:**
   - **Setup**: Price retraces into a fair value gap (inefficiency) and shows rejection or continuation signals.
   - **High Probability**: FVG fills indicate a rebalancing of price and are often used as entry points for smart money.

4. **Optimal Trade Entry (OTE) within Discount or Premium Zones:**
   - **Setup**: Price retraces to the 61.8%–79% Fibonacci zone, ideally aligned with an OB or FVG.
   - **High Probability**: This combines retracement logic with institutional price behavior, increasing entry precision.

5. **Time-of-Day Confluence (Killzones):**
   - **Setup**: Signals occur during key trading sessions (e.g., London or New York killzones).
   - **High Probability**: Institutions are most active during these times, increasing the likelihood of sustained moves.

### 6.2 Bot’s Workflow for Identifying High-Probability Trades

1. **Data Collection and Preprocessing**
   - **Input Data**: Real-time candlestick data (OHLCV) and historical price action.
   - **Chart Information**:
     - Identify swing highs/lows (zigzag indicator or price action analysis).
     - Calculate Fibonacci levels.
     - Highlight OBs and FVGs from historical price moves.

2. **High-Probability Detection Logic**

#### Liquidity Sweep Detection
- **Condition**: 
  - Recent high/low is breached by a large wick.
  - Price closes back inside the range.

#### Break of Structure (BOS)
- **Condition**: 
  - After a liquidity sweep, price breaks the previous swing high (for a bullish signal) or swing low (for a bearish signal).

#### Order Block Identification
- **Condition**:
  - Last down candle before a strong bullish move (bullish OB).
  - Last up candle before a strong bearish move (bearish OB).

#### Fair Value Gap (FVG) Detection
- **Condition**:
  - Gap between the high of one candle and the low of the next (inefficiency).
  - Price retraces to this gap.

#### Optimal Trade Entry (OTE)
- **Condition**:
  - Price retraces into the 61.8%–79% Fibonacci retracement zone.
  - Confluence with OBs or FVGs.

#### Time Filtering
- **Condition**:
  - Signal aligns with the London or New York killzone (e.g., 2 AM–5 AM EST or 7 AM–10 AM EST).

3. **End-to-End Workflow for the Bot**

   - **Real-Time Monitoring**:
     - Continuously collect candlestick data.
     - Monitor for liquidity sweeps, OBs, FVGs, and BOS in real-time.

   - **Signal Detection**:
     - Evaluate if all conditions for a high-probability trade are met.
     - Combine confluence factors: liquidity sweep → BOS → FVG → OB retest.

   - **Signal Scoring**:
     - Assign weights to each condition (e.g., OB confluence = 40%, FVG = 30%).
     - Only execute trades when signal score exceeds a predefined threshold.

   - **Trade Recommendation**:
     - If all conditions align:
       - **Entry**: At the OB or FVG.
       - **Stop Loss**: Below/above liquidity sweep level.
       - **Take Profit**: At a predetermined risk/reward ratio (e.g., 1:2).

   - **Execution**:
     - For manual trading: Display trade details.
     - For automated trading: Integrate with an API to execute orders.

### 6.3 Visual Representation

To make the bot "read" chart data:
- Use libraries like **Matplotlib** or **Plotly** in Python to visualize price levels.
- Mark liquidity sweeps, OB zones, FVGs, and retracement zones on the chart.
- Example Chart Markup:
  - Green Zones: Bullish OBs.
  - Red Zones: Bearish OBs.
  - Blue Lines: FVG.
  - Arrows: Signal directions based on BOS and liquidity sweeps.

### 6.4 Next Steps

1. **Backtest ICT Conditions**:
   - Test the bot’s logic on historical XAU/USD or BTC/USD data to validate.
2. **Optimize Parameters**:
   - Fine-tune thresholds for liquidity sweeps, FVGs, and OBs.
3. **Integrate APIs**:
   - Use brokers like MetaTrader or TradingView for live execution.

## 7. Example Code for ICT Trading Setup

```python
import pandas as pd
import numpy as np

# Load historical price data
price_data = pd.read_csv('price_data.csv')

# Identify market structure
def identify_market_structure(data):
    data['Trend'] = np.where(data['High'] > data['High'].shift(1), 'uptrend', 'downtrend')
    data['Trend'] = np.where(data['Low'] < data['Low'].shift(1), 'downtrend', data['Trend'])
    return data

# Identify swing highs and lows (liquidity pools)
def identify_liquidity_pools(data):
    data['Liquidity_Pool_High'] = data['High'].rolling(window=5, center=True).apply(lambda x: x.max() == x[2], raw=True)
    data['Liquidity_Pool_Low'] = data['Low'].rolling(window=5, center=True).apply(lambda x: x.min() == x[2], raw=True)
    return data

# Identify order blocks
def identify_order_blocks(data):
    data['Bullish_Order_Block'] = (data['Close'].shift(1) < data['Open'].shift(1)) & (data['Close'] > data['Open'])
    data['Bearish_Order_Block'] = (data['Close'].shift(1) > data['Open'].shift(1)) & (data['Close'] < data['Open'])
    return data

# Identify fair value gaps (FVG)
def identify_fvg(data):
    data['FVG'] = (data['High'].shift(1) < data['Low']) | (data['Low'].shift(1) > data['High'])
    return data

# Generate trading signals based on ICT concepts
def generate_trading_signals(data):
    signals = []
    for i in range(len(data)):
        if data['Trend'].iloc[i] == 'uptrend' and data['Bullish_Order_Block'].iloc[i] and data['Liquidity_Pool_Low'].iloc[i] and data['FVG'].iloc[i]:
            signals.append('buy')
        elif data['Trend'].iloc[i] == 'downtrend' and data['Bearish_Order_Block'].iloc[i] and data['Liquidity_Pool_High'].iloc[i] and data['FVG'].iloc[i]:
            signals.append('sell')
        else:
            signals.append('hold')
    return signals

# Apply ICT trading strategy
price_data = identify_market_structure(price_data)
price_data = identify_liquidity_pools(price_data)
price_data = identify_order_blocks(price_data)
price_data = identify_fvg(price_data)

# Generate trading signals
price_data['Signal'] = generate_trading_signals(price_data)
print(price_data[['Date', 'Signal']])